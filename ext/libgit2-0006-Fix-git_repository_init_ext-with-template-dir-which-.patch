From e7d8e6408032b8df453f088a5890cc37e694b047 Mon Sep 17 00:00:00 2001
From: Sven Strickroth <email@cs-ware.de>
Date: Fri, 16 Oct 2015 12:17:09 +0200
Subject: [PATCH] Fix git_repository_init_ext with template dir which contains
 a path starting with dot

Signed-off-by: Sven Strickroth <email@cs-ware.de>
---
 src/repository.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/repository.c b/src/repository.c
index 77145cf..34b06a0 100644
--- a/src/repository.c
+++ b/src/repository.c
@@ -1427,7 +1427,7 @@ static int repo_init_structure(
 		}
 
 		if (tdir) {
-			uint32_t cpflags = GIT_CPDIR_COPY_SYMLINKS | GIT_CPDIR_SIMPLE_TO_MODE;
+			uint32_t cpflags = GIT_CPDIR_COPY_SYMLINKS | GIT_CPDIR_SIMPLE_TO_MODE | GIT_CPDIR_COPY_DOTFILES;
 			if (opts->mode != GIT_REPOSITORY_INIT_SHARED_UMASK)
 					cpflags |= GIT_CPDIR_CHMOD_DIRS;
 			error = git_futils_cp_r(tdir, repo_dir, cpflags, dmode);
-- 
2.6.0.windows.1

